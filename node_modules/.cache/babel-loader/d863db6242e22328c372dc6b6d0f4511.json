{"remainingRequest":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/babel-loader/lib/index.js!/home/ronan/Uni/COM682/microblog-frontend/node_modules/eslint-loader/index.js??ref--14-0!/home/ronan/Uni/COM682/microblog-frontend/src/stores/users.js","dependencies":[{"path":"/home/ronan/Uni/COM682/microblog-frontend/src/stores/users.js","mtime":1659283305876},{"path":"/home/ronan/Uni/COM682/microblog-frontend/babel.config.js","mtime":1658142276000},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1659273528982},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/babel-loader/lib/index.js","mtime":1659273529530},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/eslint-loader/index.js","mtime":1659273529062}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3JvbmFuL1VuaS9DT002ODIvbWljcm9ibG9nLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN1Yi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGRlZmluZVN0b3JlIH0gZnJvbSAncGluaWEnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyB1c2VBdXRoMCB9IGZyb20gJ0BhdXRoMC9hdXRoMC12dWUnOwpleHBvcnQgdmFyIHVzZVVzZXJTdG9yZSA9IGRlZmluZVN0b3JlKCd1c2VycycsIHsKICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50Um9sZTogJ1JlYWRlcicKICAgIH07CiAgfSwKICBhY3Rpb25zOiB7CiAgICBnZXRUb2tlbjogZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnaHR0cHM6Ly9kZXYtZDY4czNpd2ouZXUuYXV0aDAuY29tL29hdXRoL3Rva2VuJywgewogICAgICAgICAgICAgICAgICAiY2xpZW50X2lkIjogIkd1UU42TnBwcU9peEMwUG1WdzA2bkk4Q2s2a3Z0dkpLIiwKICAgICAgICAgICAgICAgICAgImNsaWVudF9zZWNyZXQiOiAiM1VueEwyNUV1dlo2WlVZQkN0UFRnUU03UjZoem5Hb05YcWVTVjlvalBLSVVnUGhncW8tUlVrMDk1SmtOYkE5MiIsCiAgICAgICAgICAgICAgICAgICJhdWRpZW5jZSI6ICJodHRwczovL2Rldi1kNjhzM2l3ai5ldS5hdXRoMC5jb20vYXBpL3YyLyIsCiAgICAgICAgICAgICAgICAgICJncmFudF90eXBlIjogImNsaWVudF9jcmVkZW50aWFscyIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByb2xlQ2hlY2s6IGZ1bmN0aW9uIHJvbGVDaGVjaygpIHsKICAgICAgdmFyIGF1dGgwID0gdXNlQXV0aDAoKTsKICAgICAgYXhpb3MuZ2V0KCJodHRwczovL2Rldi1kNjhzM2l3ai5ldS5hdXRoMC5jb20vYXBpL3YyL3VzZXJzLyIuY29uY2F0KGF1dGgwLnVzZXIudmFsdWUuc3ViLCAiL3JvbGVzIiksIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBhdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhWzBdKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRSb2xlID0gcmVzcG9uc2UuZGF0YVswXS5uYW1lOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZ2V0dGVyczoge30KfSk7"},{"version":3,"names":["defineStore","axios","useAuth0","useUserStore","state","currentRole","actions","getToken","post","headers","then","response","console","log","localStorage","setItem","data","access_token","catch","error","roleCheck","auth0","get","user","value","sub","authorization","getItem","name","bind","getters"],"sources":["/home/ronan/Uni/COM682/microblog-frontend/src/stores/users.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport axios from 'axios'\nimport { useAuth0 } from '@auth0/auth0-vue';\n\n\nexport const useUserStore = defineStore('users', {\n    state: () => {\n        return {\n            currentRole: 'Reader'\n        }\n    },\n    actions: {\n        async getToken() {\n            await axios.post('https://dev-d68s3iwj.eu.auth0.com/oauth/token', {\n                \"client_id\": \"GuQN6NppqOixC0PmVw06nI8Ck6kvtvJK\",\n                \"client_secret\": \"3UnxL25EuvZ6ZUYBCtPTgQM7R6hznGoNXqeSV9ojPKIUgPhgqo-RUk095JkNbA92\",\n                \"audience\": \"https://dev-d68s3iwj.eu.auth0.com/api/v2/\", \"grant_type\": \"client_credentials\"\n            },\n                {\n                    headers: {\n                        'content-type': 'application/json',\n                    }\n                })\n                .then(function (response) {\n                    console.log(response)\n                    localStorage.setItem('token', response.data.access_token);\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        },\n        roleCheck() {\n            const auth0 = useAuth0();\n            \n            axios.get(`https://dev-d68s3iwj.eu.auth0.com/api/v2/users/${auth0.user.value.sub}/roles`, {headers: {\n                authorization: `Bearer ${localStorage.getItem('token')}`\n            }})\n            .then(function (response) {\n                console.log(response)\n                if (response.data[0]){\n                    this.currentRole = response.data[0].name\n                }\n             \n            }.bind(this))\n            .catch(function (error) {\n                console.log(error);\n            });\n        }\n    },\n    getters: {\n\n    },\n})\n"],"mappings":";;;;AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAGA,OAAO,IAAMC,YAAY,GAAGH,WAAW,CAAC,OAAD,EAAU;EAC7CI,KAAK,EAAE,iBAAM;IACT,OAAO;MACHC,WAAW,EAAE;IADV,CAAP;EAGH,CAL4C;EAM7CC,OAAO,EAAE;IACCC,QADD,sBACY;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACPN,KAAK,CAACO,IAAN,CAAW,+CAAX,EAA4D;kBAC9D,aAAa,kCADiD;kBAE9D,iBAAiB,kEAF6C;kBAG9D,YAAY,2CAHkD;kBAGL,cAAc;gBAHT,CAA5D,EAKF;kBACIC,OAAO,EAAE;oBACL,gBAAgB;kBADX;gBADb,CALE,EAUDC,IAVC,CAUI,UAAUC,QAAV,EAAoB;kBACtBC,OAAO,CAACC,GAAR,CAAYF,QAAZ;kBACAG,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,QAAQ,CAACK,IAAT,CAAcC,YAA5C;gBACH,CAbC,EAcDC,KAdC,CAcK,UAAUC,KAAV,EAAiB;kBACpBP,OAAO,CAACC,GAAR,CAAYM,KAAZ;gBACH,CAhBC,CADO;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAkBhB,CAnBI;IAoBLC,SApBK,uBAoBO;MACR,IAAMC,KAAK,GAAGnB,QAAQ,EAAtB;MAEAD,KAAK,CAACqB,GAAN,0DAA4DD,KAAK,CAACE,IAAN,CAAWC,KAAX,CAAiBC,GAA7E,aAA0F;QAAChB,OAAO,EAAE;UAChGiB,aAAa,mBAAYZ,YAAY,CAACa,OAAb,CAAqB,OAArB,CAAZ;QADmF;MAAV,CAA1F,EAGCjB,IAHD,CAGM,UAAUC,QAAV,EAAoB;QACtBC,OAAO,CAACC,GAAR,CAAYF,QAAZ;;QACA,IAAIA,QAAQ,CAACK,IAAT,CAAc,CAAd,CAAJ,EAAqB;UACjB,KAAKX,WAAL,GAAmBM,QAAQ,CAACK,IAAT,CAAc,CAAd,EAAiBY,IAApC;QACH;MAEJ,CANK,CAMJC,IANI,CAMC,IAND,CAHN,EAUCX,KAVD,CAUO,UAAUC,KAAV,EAAiB;QACpBP,OAAO,CAACC,GAAR,CAAYM,KAAZ;MACH,CAZD;IAaH;EApCI,CANoC;EA4C7CW,OAAO,EAAE;AA5CoC,CAAV,CAAhC"}]}