{"remainingRequest":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/babel-loader/lib/index.js!/home/ronan/Uni/COM682/microblog-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ronan/Uni/COM682/microblog-frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/ronan/Uni/COM682/microblog-frontend/src/views/ViewPost.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/ronan/Uni/COM682/microblog-frontend/src/views/ViewPost.vue","mtime":1659214760814},{"path":"/home/ronan/Uni/COM682/microblog-frontend/babel.config.js","mtime":1658142276000},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658172087279},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/babel-loader/lib/index.js","mtime":1658172088167},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658172087279},{"path":"/home/ronan/Uni/COM682/microblog-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1658172087755}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN1Yi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCB7IHVzZVBvc3RzU3RvcmUgfSBmcm9tICdAL3N0b3Jlcy9wb3N0cyc7CmltcG9ydCB7IHVzZUF1dGgwIH0gZnJvbSAnQGF1dGgwL2F1dGgwLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgYXV0aDAgPSB1c2VBdXRoMCgpOwogICAgcmV0dXJuIHsKICAgICAgaXNBdXRoZW50aWNhdGVkOiBhdXRoMC5pc0F1dGhlbnRpY2F0ZWQsCiAgICAgIHVzZXI6IGF1dGgwLnVzZXIKICAgIH07CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcG9zdHNTdG9yZTogdXNlUG9zdHNTdG9yZSgpLAogICAgICBjb21tZW50OiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBvc3Q6IGZ1bmN0aW9uIHBvc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvc3RzU3RvcmUuY3VycmVudFBvc3Q7CiAgICB9LAogICAgbGlrZXM6IGZ1bmN0aW9uIGxpa2VzKCkgewogICAgICByZXR1cm4gdGhpcy5wb3N0c1N0b3JlLmN1cnJlbnRQb3N0TGlrZXM7CiAgICB9LAogICAgY29tbWVudHM6IGZ1bmN0aW9uIGNvbW1lbnRzKCkgewogICAgICByZXR1cm4gdGhpcy5wb3N0c1N0b3JlLmN1cnJlbnRQb3N0Q29tbWVudHM7CiAgICB9LAogICAgaXNQb3N0TGlrZWQ6IGZ1bmN0aW9uIGlzUG9zdExpa2VkKCkgewogICAgICB2YXIgbGlrZTsKCiAgICAgIGZvciAobGlrZSBpbiB0aGlzLnBvc3RzU3RvcmUuY3VycmVudFBvc3RMaWtlcykgewogICAgICAgIGlmICh0aGlzLnBvc3RzU3RvcmUuY3VycmVudFBvc3RMaWtlc1tsaWtlXS5Vc2VySUQgPT0gdGhpcy51c2VyLnN1YikgewogICAgICAgICAgdGhpcy5wb3N0c1N0b3JlLiRwYXRjaChmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICAgICAgc3RhdGUubXlMaWtlSWQgPSBzdGF0ZS5jdXJyZW50UG9zdExpa2VzW2xpa2VdLkxpa2VJRDsKICAgICAgICAgICAgc3RhdGUuaXNQb3N0TGlrZWQgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5wb3N0c1N0b3JlLmlzUG9zdExpa2VkOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkTGlrZTogZnVuY3Rpb24gYWRkTGlrZSgpIHsKICAgICAgdmFyIHBvc3QgPSB7CiAgICAgICAgJ2lkJzogdGhpcy5wb3N0LmlkLAogICAgICAgICd1c2VySWQnOiB0aGlzLnBvc3QudXNlcklkLAogICAgICAgICdvd25lck5hbWUnOiB0aGlzLnBvc3Qub3duZXJOYW1lCiAgICAgIH07CiAgICAgIHRoaXMucG9zdHNTdG9yZS5jcmVhdGVQb3N0TGlrZShwb3N0KTsKICAgICAgdGhpcy5wb3N0c1N0b3JlLiRwYXRjaChmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICBzdGF0ZS5pc1Bvc3RMaWtlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENvbW1lbnQ6IGZ1bmN0aW9uIGFkZENvbW1lbnQoKSB7CiAgICAgIHZhciBwb3N0ID0gewogICAgICAgICdpZCc6IHRoaXMucG9zdC5pZCwKICAgICAgICAndXNlcklkJzogdGhpcy5wb3N0LnVzZXJJZCwKICAgICAgICAnY29udGVudCc6IHRoaXMuY29tbWVudCwKICAgICAgICAnb3duZXJOYW1lJzogdGhpcy5wb3N0Lm93bmVyTmFtZQogICAgICB9OwogICAgICB0aGlzLnBvc3RzU3RvcmUuY3JlYXRlUG9zdENvbW1lbnQocG9zdCk7CiAgICAgIHRoaXMuY29tbWVudCA9IG51bGw7CiAgICB9LAogICAgZGVsTGlrZTogZnVuY3Rpb24gZGVsTGlrZSgpIHsKICAgICAgdGhpcy5wb3N0c1N0b3JlLnJlbW92ZVBvc3RMaWtlKCk7CiAgICAgIHZhciBsaWtlOwoKICAgICAgZm9yIChsaWtlIGluIHRoaXMucG9zdHNTdG9yZS5jdXJyZW50UG9zdExpa2VzKSB7CiAgICAgICAgaWYgKHRoaXMucG9zdHNTdG9yZS5jdXJyZW50UG9zdExpa2VzW2xpa2VdLkxpa2VJRCA9PSB0aGlzLnBvc3RzU3RvcmUubXlMaWtlSWQpIHsKICAgICAgICAgIHRoaXMucG9zdHNTdG9yZS4kcGF0Y2goZnVuY3Rpb24gKHN0YXRlKSB7CiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRQb3N0TGlrZXMuc3BsaWNlKGxpa2UsIDEpOwogICAgICAgICAgICBzdGF0ZS5pc1Bvc3RMaWtlZCA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;AACA,SAASA,aAAT,QAA8B,gBAA9B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,eAAe;EACXC,KADW,mBACH;IACJ,IAAMC,KAAK,GAAGF,QAAQ,EAAtB;IACA,OAAO;MACHG,eAAe,EAAED,KAAK,CAACC,eADpB;MAEHC,IAAI,EAAEF,KAAK,CAACE;IAFT,CAAP;EAIH,CAPU;EAQXC,IARW,kBAQL;IACF,OAAM;MACFC,UAAU,EAAEP,aAAa,EADvB;MAEFQ,OAAO,EAAG;IAFR,CAAN;EAKH,CAdU;EAeXC,QAAQ,EAAE;IACNC,IADM,kBACA;MACF,OAAO,KAAKH,UAAL,CAAgBI,WAAvB;IACH,CAHK;IAINC,KAJM,mBAIC;MACH,OAAO,KAAKL,UAAL,CAAgBM,gBAAvB;IACH,CANK;IAONC,QAPM,sBAOI;MACN,OAAO,KAAKP,UAAL,CAAgBQ,mBAAvB;IACH,CATK;IAUNC,WAVM,yBAUO;MACT,IAAIC,IAAJ;;MACA,KAAKA,IAAL,IAAa,KAAKV,UAAL,CAAgBM,gBAA7B,EAA8C;QAC1C,IAAI,KAAKN,UAAL,CAAgBM,gBAAhB,CAAiCI,IAAjC,EAAuCC,MAAvC,IAAiD,KAAKb,IAAL,CAAUc,GAA/D,EAAmE;UAC9D,KAAKZ,UAAL,CAAgBa,MAAhB,CAAuB,UAACC,KAAD,EAAW;YAC/BA,KAAK,CAACC,QAAN,GAAiBD,KAAK,CAACR,gBAAN,CAAuBI,IAAvB,EAA6BM,MAA9C;YACAF,KAAK,CAACL,WAAN,GAAoB,IAApB;UACH,CAHA;QAIJ;MAEJ;;MACD,OAAO,KAAKT,UAAL,CAAgBS,WAAvB;IAEH;EAvBK,CAfC;EAyCXQ,OAAO,EAAE;IACLC,OADK,qBACK;MACN,IAAIf,IAAI,GAAG;QAAC,MAAM,KAAKA,IAAL,CAAUgB,EAAjB;QAAqB,UAAU,KAAKhB,IAAL,CAAUiB,MAAzC;QAAgD,aAAa,KAAKjB,IAAL,CAAUkB;MAAvE,CAAX;MACA,KAAKrB,UAAL,CAAgBsB,cAAhB,CAA+BnB,IAA/B;MACA,KAAKH,UAAL,CAAgBa,MAAhB,CAAuB,UAACC,KAAD,EAAW;QAC9BA,KAAK,CAACL,WAAN,GAAoB,IAApB;MACH,CAFD;IAIH,CARI;IASLc,UATK,wBASQ;MACT,IAAIpB,IAAI,GAAG;QAAC,MAAM,KAAKA,IAAL,CAAUgB,EAAjB;QAAqB,UAAU,KAAKhB,IAAL,CAAUiB,MAAzC;QAAiD,WAAW,KAAKnB,OAAjE;QAA0E,aAAa,KAAKE,IAAL,CAAUkB;MAAjG,CAAX;MACA,KAAKrB,UAAL,CAAgBwB,iBAAhB,CAAkCrB,IAAlC;MACA,KAAKF,OAAL,GAAe,IAAf;IACH,CAbI;IAcLwB,OAdK,qBAcK;MACN,KAAKzB,UAAL,CAAgB0B,cAAhB;MACA,IAAIhB,IAAJ;;MACA,KAAKA,IAAL,IAAa,KAAKV,UAAL,CAAgBM,gBAA7B,EAA8C;QAC1C,IAAI,KAAKN,UAAL,CAAgBM,gBAAhB,CAAiCI,IAAjC,EAAuCM,MAAvC,IAAiD,KAAKhB,UAAL,CAAgBe,QAArE,EAA8E;UAC1E,KAAKf,UAAL,CAAgBa,MAAhB,CAAuB,UAACC,KAAD,EAAW;YAC9BA,KAAK,CAACR,gBAAN,CAAuBqB,MAAvB,CAA8BjB,IAA9B,EAAoC,CAApC;YACAI,KAAK,CAACL,WAAN,GAAoB,KAApB;UACH,CAHD;QAIH;MACJ;IAGJ;EA3BI;AAzCE,CAAf","names":["usePostsStore","useAuth0","setup","auth0","isAuthenticated","user","data","postsStore","comment","computed","post","currentPost","likes","currentPostLikes","comments","currentPostComments","isPostLiked","like","UserID","sub","$patch","state","myLikeId","LikeID","methods","addLike","id","userId","ownerName","createPostLike","addComment","createPostComment","delLike","removePostLike","splice"],"sourceRoot":"","sources":["/home/ronan/Uni/COM682/microblog-frontend/src/views/ViewPost.vue"],"sourcesContent":["<template>\n   <div class=\"uk-child-width-1-2@m\" uk-grid>\n        <div class=\"uk-card uk-card-default uk-card-body\">\n            <h2>{{ post.ownerName }}</h2>\n            <h5>{{ post.ownerOrg }}</h5>\n            <img :src=\"post.imgUrl\" alt=\"microblog-photo\" max-height=\"100px\">\n            <p>{{ post.postContent }}</p>\n            <small>{{ post.userId }}</small>\n            <div v-if=\"isAuthenticated\">\n                <a v-if=\"isPostLiked == false\" class=\"reactions uk-icon-button\" @click=\"addLike()\" uk-tooltip=\"Like the Post\">\n                <span uk-icon=\"happy\"></span>\n                </a>\n                <a v-if=\"isPostLiked == true\" class=\"reactions uk-icon-button\" @click=\"delLike()\" uk-tooltip=\"Remove Your Like from the Post\">\n                <span uk-icon=\"history\"></span>\n                </a>\n            </div>\n        </div>\n        <div class=\"commentCard uk-card uk-card-default uk-card-body\">\n            <div class=\"uk-child-width-1-2@m\" uk-grid>\n                <div>  \n                     <h2>\n                        Comments\n                    </h2>\n                </div>\n           \n                <div>\n                    <button class=\"uk-button uk-button-primary\" type=\"button\" uk-toggle=\"target: #modal-likes\">View Likes</button>\n                    <div id=\"modal-likes\" uk-modal>\n                        <div class=\"uk-modal-dialog uk-modal-body\">\n                            <button class=\"uk-modal-close-default\" type=\"button\" uk-close></button>\n                            <h2 class=\"uk-modal-title\">Likes</h2>\n                            <div id=\"likeBox\" v-for=\"like in this.likes\" v-bind:key=\"like.id\">\n                                <h5>\n                                    {{like.OwnerName}}\n                                </h5>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div>\n               \n                <div class=\"uk-child-width-1-2@m\" uk-grid>\n                    <div>\n                        <textarea v-model=\"comment\"  class=\"uk-textarea\" maxlength=\"200\"></textarea>  \n                    </div>         \n                    <div id=\"submitPostCol\">\n                        <button class=\"subBtn uk-button uk-button-secondary\" @click=\"addComment()\">Submit Post</button>\n                    </div>\n                </div>\n\n            </div>\n            <div v-for=\"comment in comments\" v-bind:key=\"comment.id\" id=\"commentBox\">\n                <h3>{{comment.OwnerName}}</h3>\n                <p>{{comment.CommentContent}}</p>\n            </div>\n        </div>\n\n\n   </div>\n</template>\n\n<script>\nimport { usePostsStore } from '@/stores/posts'\nimport { useAuth0 } from '@auth0/auth0-vue'\n\nexport default {\n    setup() {\n        const auth0 = useAuth0();\n        return {\n            isAuthenticated: auth0.isAuthenticated,\n            user: auth0.user,\n        }\n    },\n    data(){\n        return{\n            postsStore: usePostsStore(),\n            comment : null\n            \n        }\n    },\n    computed: {\n        post(){\n            return this.postsStore.currentPost\n        },\n        likes(){\n            return this.postsStore.currentPostLikes\n        },\n        comments(){\n            return this.postsStore.currentPostComments\n        },\n        isPostLiked(){\n            var like;\n            for (like in this.postsStore.currentPostLikes){\n                if (this.postsStore.currentPostLikes[like].UserID == this.user.sub){\n                     this.postsStore.$patch((state) => {\n                        state.myLikeId = state.currentPostLikes[like].LikeID\n                        state.isPostLiked = true\n                    })\n                }\n\n            }\n            return this.postsStore.isPostLiked\n        \n        },\n\n    },\n    methods: {\n        addLike() {\n            var post = {'id': this.post.id, 'userId': this.post.userId,'ownerName': this.post.ownerName}\n            this.postsStore.createPostLike(post)\n            this.postsStore.$patch((state) => {\n                state.isPostLiked = true\n            })\n\n        },\n        addComment() {\n            var post = {'id': this.post.id, 'userId': this.post.userId, 'content': this.comment, 'ownerName': this.post.ownerName}\n            this.postsStore.createPostComment(post)\n            this.comment = null\n        },\n        delLike() {\n            this.postsStore.removePostLike()\n            var like;\n            for (like in this.postsStore.currentPostLikes){\n                if (this.postsStore.currentPostLikes[like].LikeID == this.postsStore.myLikeId){\n                    this.postsStore.$patch((state) => {\n                        state.currentPostLikes.splice(like, 1)\n                        state.isPostLiked = false\n                    })\n                }\n            }\n            \n            \n        }\n    }\n\n}\n</script>\n\n<style scoped>\n.commentCard{\n    overflow-y: scroll;\n    max-height: 60vh;\n}\n.reactions{\n    float: right;\n}\n\n.subBtn{\n    height: 10vh;\n    margin-left: 2vw;\n}\n.uk-textarea{\n    min-width: 20vw;\n    min-height: 10vh;\n}\n\n.uk-grid{\n    margin-bottom: 5vh;\n}\n\n#commentBox{\n    border: 2px solid lightgray;\n    padding: 1vh;\n    margin: 1vh;\n}\n\n#likeBox{\n    border: 2px solid lightgray;\n    padding: 1vh;\n    margin: 1vh;\n}\n\n#submitPostCol{\n    margin-left: 5vw;\n    width: 25%;\n}\n\n\n</style>"]}]}